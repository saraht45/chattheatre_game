<object clone="/obj/properties" owner="balkaar">
  <Core:PropertyContainer>
    <Ur:UrObject/>
    <Core:PCProperties>
      <Core:Property property="merry:lib:euphoricemits">
         X[M] /* The emits sent while under the effect of poison */      
/*effect based on difference between body and poison intensity*/ 
 
if (\$effect \< 2) \{ 
   switch(random(5))                    
   \{                    
       case 4:                    
         EmitTo(\$actor, "Your skin pleasantly tickles."); 
         EmitIn(\$actor."base:environment", Describe(\$actor)+" has goosebumps all over " +\$actor."trait:possessive"+ " skin.", \$actor); 
       break;               
       case 3:                    
         EmitIn(\$actor."base:environment", Describe(\$actor)+ " has an odd squirming smile on " +\$actor."trait:possessive"+ " face.", \$actor);            
         EmitTo(\$actor, "Butterflies tickle your belly.");                    
       break;               
       case 2:                    
         EmitIn(\$actor."base:environment", Describe(\$actor)+ " " +oneof("reasonlessly", "suddenly", "randomly", "excessively")+ " moistens " +\$actor."trait:possessive"+ " lips.", \$actor);            
         EmitTo(\$actor, "Your lips suddenly feel dry.");                    
       break;                    
       case 1:                    
         EmitIn(\$actor."base:environment", "A " +oneof("content", "pleased", "joyful")+ " smile spreads over " +Describe(\$actor)+ "'s face.", \$actor);              
         EmitTo(\$actor, "Your blood flows " +oneof("richly", "warmly", "hotly")+ " through your veins.");                    
       break;                    
       case 0:                    
         EmitIn(\$actor."base:environment", Describe(\$actor)+ " appears to be " +oneof("spirited", "lax", "lazy")+ ".", \$actor);            
         EmitTo(\$actor, "You feel " +oneof("well", "lax", "lazy")+ ".");                    
       break;                    
      default:                    
      break;                    
   \}                    
\} else if (\$effect \< 4) \{ 
   switch(random(5))                    
   \{                    
       case 4:                    
         EmitIn(\$actor."base:environment", Describe(\$actor)+ " squirms " +oneof("blissfully", "ticklishly", "laughingly")+ " with a " +oneof("joyful", "silly", "stupid", "odd")+ " smile on " +\$actor."trait:possessive"+ " face.", \$actor);            
         EmitTo(\$actor, "Thunderbolts race up and down your spine tickling your body.");                    
       break;               
       case 3:                    
         EmitIn(\$actor."base:environment", Describe(\$actor)+ " smiles " +oneof("blissfully", "euphorically", "helplessly")+ ".", \$actor);            
         EmitTo(\$actor, "You smile " +oneof("blissfully", "euphorically", "helplessly")+ ".");                           
       break;               
       case 2:                    
         EmitTo(\$actor, "You feel magnificent."); 
         EmitIn(\$actor."base:environment", Describe(\$actor)+" is in a " +oneof("joyful", "magnificent", "excellent")+ " mood.", \$actor); 
       break;                    
       case 1:                    
         EmitIn(\$actor."base:environment", Describe(\$actor)+ "'s eyes shine with a deep inner fire.", \$actor);              
         EmitTo(\$actor, "Your body burns with an inner fire.");                    
       break;                    
       case 0:                    
         EmitIn(\$actor."base:environment", Describe(\$actor)+ " suddenly seems to be out of breath.", \$actor);            
         EmitTo(\$actor, "You suddenly feel out of breath.");                    
       break;                    
      default:                    
      break;                    
   \}                    
\} else if (\$effect \< 6) \{ 
   switch(random(5))                    
   \{                    
       case 4:                    
         EmitIn(\$actor."base:environment", Describe(\$actor)+ " is all woohoo and stuff.", \$actor);            
         EmitTo(\$actor, "You are all woohoo and stuff.");                    
       break;               
       case 3:                    
         EmitIn(\$actor."base:environment", Describe(\$actor)+ " thinks highly of you and others present.", \$actor);            
         EmitTo(\$actor, "People around you are all " +oneof("kind", "smiling", "helpful")+ ".");       
       break;               
       case 2:                    
         EmitTo(\$actor, "You know you can achieve anything you want."); 
         EmitIn(\$actor."base:environment", Describe(\$actor)+ " " +oneof("confidently", "bravely", "proudly")+ " grins.", \$actor); 
       break;                    
       case 1:                   
         EmitIn(\$actor."base:environment", Describe(\$actor)+ " knowingly acknowledges you then giggles childishly.", \$actor);              
         EmitTo(\$actor, "You are pretty and all adore you.");                    
       break;                    
       case 0:                    
         EmitIn(\$actor."base:environment", Describe(\$actor)+ "'s skin is lightly coated in sweat.", \$actor);            
         EmitTo(\$actor, "Your skin is lightly coated in your sweat.");                    
       break;                    
      default:                    
      break;                    
   \}                    
\} else if (\$effect \< 8) \{ 
   switch(random(5))                    
   \{                    
       case 4:                    
         EmitTo(\$actor, "Everyone adores and loves you."); 
         EmitIn(\$actor."base:environment", Describe(\$actor)+" " +oneof("sassily", "enticingly", "smirkingly")+ " poses.", \$actor); 
       break;               
       case 3:                    
         EmitIn(\$actor."base:environment", Describe(\$actor)+ " shivers " +oneof("delightedly", "ecstatically", "intoxicatedly")+ ".", \$actor);            
         EmitTo(\$actor, "You shiver " +oneof("delightedly", "ecstatically", "intoxicatedly")+ ".");                    
       break;               
       case 2:                    
         EmitIn(\$actor."base:environment", Describe(\$actor)+ " " +oneof("suddenly", "abruptly")+ " bursts in a set of " +oneof("hilarious", "reasonless", "high-pitched", "lengthy")+ " giggles.", \$actor); 
         EmitTo(\$actor, "You just had to giggle!");                    
       break;                    
       case 1:                    
         EmitIn(\$actor."base:environment", "The pupils of the " +Describe(\$actor)+ " don't seem to react to the changes of the environment. They are wide and dull with a " +oneof("misty", "distant", "distracted", "dreamy")+ " taint.", \$actor);          
         EmitTo(\$actor, "Everything is just so bright and sharp, the details clearly showing. What an intense experience!");                    
       break;                    
       case 0:                    
         EmitIn(\$actor."base:environment", Describe(\$actor)+ " sweats " +oneof("visibly", "moderately", "reasonlessly")+ ".", \$actor);            
         EmitTo(\$actor, "Your palms are moist.");                    
       break;                    
      default:                    
      break;                    
   \}                    
\} else if (\$effect \< 10) \{ 
   switch(random(5))                    
   \{                    
       case 4:                    
         EmitTo(\$actor, "You beam " +oneof("radiantly", "sunnily", "randomly")+ "."); 
         EmitIn(\$actor."base:environment", Describe(\$actor)+" beams " +oneof("radiantly", "sunnily", "randomly")+ ".", \$actor); 
       break;               
       case 3:                    
         EmitTo(\$actor, "You sweat " +oneof("profusely", "a lot", "extensively")+ "."); 
         EmitIn(\$actor."base:environment", Describe(\$actor)+" sweats " +oneof("profusely", "a lot", "extensively")+ ".", \$actor); 
       break;               
       case 2:                    
         EmitIn(\$actor."base:environment", Describe(\$actor)+ " widely grins at something invisible lengthily focusing on that point.", \$actor); 
         EmitTo(\$actor, "You are the best of best.");                    
       break;                    
       case 1:                    
         EmitIn(\$actor."base:environment", Describe(\$actor)+ " makes a few movements that show similarities with swimming, though you can not be sure.", \$actor);          
         EmitTo(\$actor, "You are swimming in " +oneof("joy", "pleasure", "happiness")+ ".");                    
       break;                    
       case 0:                    
         EmitIn(\$actor."base:environment", Describe(\$actor)+ " keeps winking at you.", \$actor);            
         EmitTo(\$actor, "People are about to fall on their knees and beg for your attention.");                    
       break;                    
      default:                    
      break;                    
   \}                    
\} else \{ 
   switch(random(5))                    
   \{                    
       case 4:                    
         EmitTo(\$actor, "You feel " +oneof("euphoric", "cathartic", "intoxicated")+ "."); 
         EmitIn(\$actor."base:environment", Describe(\$actor)+" appears " +oneof("euphoric", "cathartic", "intoxicated")+ ".", \$actor); 
       break;               
       case 3:                    
         EmitTo(\$actor, "You laugh " +oneof("like a maniac", "abruptly", "sharply")+ "."); 
         EmitIn(\$actor."base:environment", Describe(\$actor)+" laughs " +oneof("like a maniac", "abruptly", "sharply")+ ".", \$actor); 
       break;               
       case 2:                    
         EmitIn(\$actor."base:environment", Describe(\$actor)+ " loses " +\$actor."trait:possessive"+ " gaze " +oneof("distantly", "dreamily", "unresponsively", "euphorically")+ ".", \$actor); 
         EmitTo(\$actor, "For a short moment you are not sure where you are, but you have a hell of a good time there.");                    
       break;                    
       case 1:                    
         EmitIn(\$actor."base:environment", "Drops of sweat blur the vision of " +Describe(\$actor)+ ", " +\$actor."trait:possessive"+ " whole body shaking and moist with sweat.", \$actor);          
         EmitTo(\$actor, "Your vision is blurred by sweat dropping from your forehead.");                    
       break;                    
       case 0:                    
         EmitIn(\$actor."base:environment", Describe(\$actor)+ " " +oneof("whines", "whimpers", "sobs", "howls")+ " " +oneof("intoxicatedly", "joyfully", "overwhelmedly")+ ", it makes you wonder if anyone is at home.", \$actor);            
         EmitTo(\$actor, "You " +oneof("whine", "whimper", "sob", "howl")+ " " +oneof("intoxicatedly", "joyfully", "overwhelmedly")+ ".");                   
       break;                    
      default:                    
      break;                    
   \}                    
\} 
return TRUE;
      </Core:Property>
      <Core:Property property="merry:lib:example">
         X[M] if(!\$ob."poison:intensity") \{ 
    \$ob."poison:intensity" = random(14)+1; 
\} 
 
\$intensity = \$ob."poison:intensity"; 
 
/*check for poison type, if not set, make it nerve poison (I would like if we would randomly set parent's poison type, but I don't know how)*/ 
/* effects of the poison (poison type)nerve, immune, muscle, blood, cell, euphoric*/ 
if(!\$ob."poison:type") \{ 
    \$ob."poison:type" = "euphoric"; 
\} 
 
/*have body(+ modifyer) roll*/ 
/*modifyer= possible skill, possible spell, possible charms, animal bonus*/ 
\$health = ironclaw::roll(\$roller: \$actor, \$bonus: "trait:body"); 
 
/*emit to people the way they get poisoned eg: you eat the dirty food*/ 
EmitTo(\$actor, "You swallow the last of "+Describe(\$ob, nil, \$actor)+ "."); 
EmitIn(\$actor."base:environment", Describe(\$actor)+ " " +\$verb+"s " +Describe(\$ob, nil, nil, STYLE_NONPOSS), \$actor); 
 
/*(if body roll is lower then intensity) the actual poisoning - call library depending on poison type (possibly add new skill/spell: poison resistance)*/ 
\$effect = \$intensity - \$health; 
if(\$effect \< 1) \$effect = 1; 
 
if(\$ob."poison:type" == "euphoric") \{ 
    /* CHANGE: Check to see if chatter is already under the influence. If they are, just reset the timer and increase the intensity of the effect. If not, set chatter to being under influence and start the timer. */ 
    if(\$actor."is:euphoric") \{ 
        \$actor."euphoric:timer" = 10; 
        \$actor."euphoric:effect" += \$effect; 
    \} else \{ 
        \$actor."is:euphoric" = 1; 
        \$actor."euphoric:effect" = \$effect; 
        Call(\$this, "starttimer"); 
    \} 
\} 
 
/* else if(\$ob."poison:type" == "nerve") \{ 
\$actor."is:nervepoisoned" = 1; 
Call(\$this, "starttimer"); 
\} else if(\$ob."poison:type" == "muscle") \{ 
\$actor."is:musclepoisoned" = 1; 
Call(\$this, "starttimer"); 
\} */ 
 
else \{ 
return FALSE; 
\} 
if(\$ob."no:slay") \{ 
 return FALSE; 
 \} else \{ 
 Slay(\$ob); 
 return FALSE; 
 \} 
 
 
/*gardeners have chance to notice what poison it is*/ 
/*those having poison skill have chance to notice what poison it is (exact type and intensity)*/ 
/*healers have chance to determine if they can heal it or not*/ 
/*later white mages will have spell to determine what is the poison and how to heal it*/ 
 
return TRUE;
      </Core:Property>
      <Core:Property property="merry:lib:starttimer">
         X[M] /* The timer and finish code when it runs out */        
if(!\$ob.timer)  
    \$ob.timer = 10;   
          
if(!\$actor."euphoric:timer") \{ 
    \$actor."euphoric:timer" = \$ob.timer;  
\} 
  
if(!\$ob.length)  
    \$ob.length = 240;    
 
\$length = \$ob.length;                   
                    
\$delay(1, TRUE, "02b9");  
        
/* CHANGE: reference timer in chatter */              
while(\$actor."euphoric:timer" \&\& (\$actor."euphoric:timer" \< \$length)) \{          
    /*if(\$actor."is:nervepoisoned") \{                 
          Call(\$this, "nerveemits");   
      \}       
 
      if(\$actor."is:musclepoisoned") \{                 
          Call(\$this, "muscleemits");    
      \} 
    */ 
 
    if(\$actor."is:euphoric") \{                 
        Call(\$this, "euphoricemits");   
    \}      
               
    /* CHANGE: Random delay between emits. 30s min, 90s max */ 
    \$delay(30 + random(60), TRUE, "b73d");                      
    \$actor."euphoric:timer" += random(30);                      
\}               
        
\$actor."euphoric:timer" = nil;            
\$actor."euphoric:effect" = nil; 
/*\$actor."is:musclepoisoned" = nil;     
\$actor."is:nervepoisoned" = nil;    */ 
\$actor."is:euphoric" = nil;               
EmitTo(\$actor, "You feel your head has mostly cleared.");              
return TRUE;
      </Core:Property>
      <Core:Property property="poison:type">"nerve"</Core:Property>
      <Core:Property property="revisions">
         (\{ 1144052088, "-", "SYNC", 1208374634, "balkaar", "E", 1208375665, "balkaar", "E", 1208377233, "balkaar", "E", 1208377449, "balkaar", "E", 1208378483, "balkaar", "E", 1208378678, "balkaar", "E", 1208379090, "balkaar", "E", 1208379370, "balkaar", "E", 1208379616, "balkaar", "E", 1209599843, "balkaar", "E", 1209599930, "balkaar", "E", 1209600477, "balkaar", "E", 1209600709, "balkaar", "E", 1209600730, "balkaar", "E", 1213909883, "balkaar", "E", 1213909889, "balkaar", "E", 1213910049, "balkaar", "E", 1213911762, "balkaar", "E", 1213912743, "balkaar", "E", 1213913100, "balkaar", "E", 1213913769, "balkaar", "E", 1213914111, "balkaar", "E", 1213914201, "balkaar", "E", 1213914504, "balkaar", "E", 1213914689, "balkaar", "E", 1213914710, "balkaar", "E", 1213914745, "balkaar", "E", 1213915248, "balkaar", "E", 1213915374, "balkaar", "E", 1213915623, "balkaar", "E", 1213945086, "balkaar", "E", 1213945528, "balkaar", "E", 1213945685, "balkaar", "E", 1213945814, "balkaar", "E", 1213956754, "balkaar", "E", 1214248665, "balkaar", "E", 1214252448, "balkaar", "E", 1214254665, "balkaar", "E", 1214254827, "balkaar", "E", 1214254888, "balkaar", "E", 1214254930, "balkaar", "E", 1214255057, "balkaar", "E", 1214255156, "balkaar", "E", 1214255883, "balkaar", "E", 1214256667, "balkaar", "E", 1214256923, "balkaar", "E", 1214258054, "balkaar", "E", 1214258098, "balkaar", "E", 1214258129, "balkaar", "E", 1214258764, "balkaar", "E", 1214259241, "balkaar", "E", 1214259350, "balkaar", "E", 1214260255, "balkaar", "E", 1229858310, "jominey", "E", 1229870379, "jominey", "E", 1229873158, "jominey", "E", 1229873633, "jominey", "E", 1229873762, "jominey", "E", 1232616273, "tonyd", "P", 1232616395, "tonyd", "P", 1232617281, "tonyd", "P", 1232617328, "tonyd", "P", 1233302541, "balkaar", "E", 1233302619, "balkaar", "E", 1233302679, "balkaar", "E", 1251398435, "slurpeeslurp", "E", 1288771699, "tunk_bodin", "E", 1288772487, "tunk_bodin", "X" \})
      </Core:Property>
    </Core:PCProperties>
    <Notes:Notes/>
  </Core:PropertyContainer>
</object>
