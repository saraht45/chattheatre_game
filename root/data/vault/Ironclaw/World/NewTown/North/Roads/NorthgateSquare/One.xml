<object clone="/base/obj/thing" owner="tunk_bodin">
  <Base:Thing>
    <Ur:UrObject urobject="OBJ(Ironclaw:World:NewTown:North:Roads:NorthgateSquare:Ur)"/>
    <Base:Bulk immobile="false" mass="1" density="1"/>
    <Base:Container flexible="false" transparent-container="false" public-container="false" tight="false" capacity="1" maxweight="1"/>
    <Base:Misc gender="neuter" volition="false" weapon="false" default_stance="none" combinable="false" discrete="false" by_weight="false" tight="false" scriptrunner="false">
      <Base:Edible value="false"/>
      <Base:Potable value="false"/>
      <Base:DrinkMessageFirst/>
      <Base:DrinkMessageThird/>
      <Base:Transparency value="false"/>
      <Base:Unsafe value="false"/>
      <Base:Safe value="false"/>
      <Base:ClothesExpected value="false"/>
      <Base:DieMessageFirst/>
      <Base:DieMessageThird/>
    </Base:Misc>
    <Base:Details>
      <Base:Detail id="default" prime="true" def="false" abstract="false" hidden="false" luminosity="0" targetable_in_dark="true" plural="false">
        <Base:Preposition close="true" against="true" under="true" on="false" inside="true" near="true" over="false" behind="false" before="true" beside="true"/>
        <Base:Names>
          <Base:SNames>
            <Base:SName sname="square"/>
          </Base:SNames>
          <Base:PNames>
            <Base:PName pname="squares"/>
          </Base:PNames>
        </Base:Names>
        <Base:Adjectives>
          <Base:Adjective adjective="northgate"/>
        </Base:Adjectives>
        <Base:Descriptions>
          <Base:Description type="mapurl">
             http://www.skotos.net/IronclawGame/images/maps/<night>night/</night>newtown/roads/north newtown/north gate.jpg
          </Base:Description>
        </Base:Descriptions>
        <Base:Exit door="false" never_obvious="false" obvious_when_open="false" hidden_when_closed="false" separate="false" self-locking="false" deadbolt="false"/>
        <Base:Climbable/>
      </Base:Detail>
      <Base:Detail id="exit-east" prime="false" def="true" abstract="false" hidden="false" luminosity="0" targetable_in_dark="false" plural="false">
        <Base:Preposition close="true" against="false" under="false" on="false" inside="false" near="true" over="false" behind="false" before="true" beside="true"/>
        <Base:Names>
          <Base:SNames>
            <Base:SName sname="east"/>
            <Base:SName sname="exit"/>
          </Base:SNames>
          <Base:PNames/>
        </Base:Names>
        <Base:Adjectives/>
        <Base:Descriptions/>
        <Base:Exit dest="NREF(Ironclaw:World:NewTown:North:Roads:CollegeSquare:One|exit-west)" door="false" never_obvious="false" obvious_when_open="false" hidden_when_closed="false" separate="false" self-locking="false" deadbolt="false">
          <Base:Direction dir="east"/>
        </Base:Exit>
        <Base:Climbable/>
      </Base:Detail>
      <Base:Detail id="exit-north" prime="false" def="false" abstract="false" hidden="false" luminosity="0" targetable_in_dark="false" plural="false">
        <Base:Preposition close="true" against="true" under="false" on="false" inside="false" near="true" over="false" behind="false" before="true" beside="true"/>
        <Base:Names>
          <Base:SNames>
            <Base:SName sname="north"/>
            <Base:SName sname="gate"/>
            <Base:SName sname="exit"/>
            <Base:SName sname="portcullis"/>
          </Base:SNames>
          <Base:PNames>
            <Base:PName pname="exits"/>
            <Base:PName pname="gates"/>
            <Base:PName pname="portcullises"/>
          </Base:PNames>
        </Base:Names>
        <Base:Adjectives>
          <Base:Adjective adjective="iron"/>
          <Base:Adjective adjective="massive"/>
        </Base:Adjectives>
        <Base:Descriptions>
          <Base:Description type="brief">
             a massive iron portcullis
          </Base:Description>
        </Base:Descriptions>
        <Base:Exit dest="NREF(Ironclaw:AAs:Adventures:Wilderness:Road:01|exit-south)" door="true" never_obvious="false" obvious_when_open="false" hidden_when_closed="false" separate="false" self-locking="false" deadbolt="false">
          <Base:Direction dir="north"/>
        </Base:Exit>
        <Base:Climbable/>
      </Base:Detail>
      <Base:Detail id="exit-south" prime="false" def="true" abstract="false" hidden="false" luminosity="0" targetable_in_dark="false" plural="false">
        <Base:Preposition close="true" against="false" under="false" on="false" inside="false" near="true" over="false" behind="false" before="true" beside="true"/>
        <Base:Names>
          <Base:SNames>
            <Base:SName sname="south"/>
            <Base:SName sname="exit"/>
          </Base:SNames>
          <Base:PNames/>
        </Base:Names>
        <Base:Adjectives/>
        <Base:Descriptions/>
        <Base:Exit dest="NREF(Ironclaw:World:NewTown:North:Roads:HeavensGate:One|exit-north)" door="false" never_obvious="false" obvious_when_open="false" hidden_when_closed="false" separate="false" self-locking="false" deadbolt="false">
          <Base:Direction dir="south"/>
        </Base:Exit>
        <Base:Climbable/>
      </Base:Detail>
      <Base:Detail id="booth" prime="false" def="false" abstract="false" hidden="false" luminosity="0" targetable_in_dark="false" plural="false">
        <Base:Preposition close="true" against="true" under="true" on="true" inside="true" near="true" over="true" behind="true" before="true" beside="true"/>
        <Base:Names>
          <Base:SNames>
            <Base:SName sname="booth"/>
          </Base:SNames>
          <Base:PNames>
            <Base:PName pname="booths"/>
          </Base:PNames>
        </Base:Names>
        <Base:Adjectives>
          <Base:Adjective adjective="toll"/>
        </Base:Adjectives>
        <Base:Descriptions>
          <Base:Description type="brief">
             toll booth
          </Base:Description>
          <Base:Description type="look">
             A small wooden box with a turnstile placed in front of the northern gate leading out of the city.
          </Base:Description>
        </Base:Descriptions>
        <Base:Exit door="false" never_obvious="false" obvious_when_open="false" hidden_when_closed="false" separate="false" self-locking="false" deadbolt="false"/>
        <Base:Climbable/>
      </Base:Detail>
      <Base:Detail id="wall-gated" prime="false" def="true" abstract="false" hidden="false" luminosity="5" targetable_in_dark="true" plural="false">
        <Base:Preposition close="true" against="true" under="false" on="false" inside="false" near="true" over="false" behind="false" before="true" beside="true"/>
        <Base:Names>
          <Base:SNames>
            <Base:SName sname="wall"/>
          </Base:SNames>
          <Base:PNames>
            <Base:PName pname="walls"/>
          </Base:PNames>
        </Base:Names>
        <Base:Adjectives>
          <Base:Adjective adjective="gated"/>
          <Base:Adjective adjective="main"/>
          <Base:Adjective adjective="surrounding"/>
        </Base:Adjectives>
        <Base:Descriptions>
          <Base:Description type="brief">
             the main wall that encompasses New Town
          </Base:Description>
          <Base:Description type="look">
             The main wall that encompasses New Town. It is crafted from large, heavy drab stones and rises several stories from the ground.
          </Base:Description>
        </Base:Descriptions>
        <Base:Exit door="false" never_obvious="false" obvious_when_open="false" hidden_when_closed="false" separate="false" self-locking="false" deadbolt="false"/>
        <Base:Climbable/>
      </Base:Detail>
    </Base:Details>
    <Base:Combat>
      <Base:Strength value="1"/>
      <Base:MaxFatigue value="1"/>
    </Base:Combat>
    <Base:Clothing>
      <Base:SingleWear value="false"/>
    </Base:Clothing>
    <Base:Crafting see_level="0" do_level="0" time="0" attention="false" held="false">
      <Base:Ingredients/>
      <Base:Tools/>
      <Base:CraftVerbs/>
    </Base:Crafting>
    <Base:InitialContents/>
    <Base:InitialProperties/>
    <Core:Properties>
      <Core:Property property="bak:merry:lib:enter-danger">
         X[M] /* But first, let's look for a ticket */
\$inventory = \$actor."base:inventory";

for(\$i = 0; \$i \< sizeof(\$inventory) \&\& !\$found; \$i++) \{
    if(\$inventory[\$i]."base:urparent") \{
        if(\$inventory[\$i]."base:urparent" == \$\{Ironclaw:Props:TollTickets:TriskellianToTC\}) \{
            \$found = \$inventory[\$i];
        \}
    \}
\}

if(\$found) \{
    EmitTo(\$actor, TAG("You hand " + Describe(\$found, nil, \$actor) + " to a lanky fox guard as you pass through.", "social:first"));
    Slay(\$found);
\} else \{
    EmitTo(\$actor, TAG("A lanky fox guard stops you, \\"Halt! You may not pass through without a toll ticket.\\"", "social:first"));
    return FALSE;
\}

/* enter the danger area */ 
\$actor."danger:consented" = 1;
Act(\$actor, "enter", \$what: NewNRef(\$this, "exit-north")); 
\$actor."danger:consented" = nil; 

/* Passage allowed. Don't let them return for 24 hours. */
\$actor."travel:delay" = time() + 24*60*60;
return TRUE;
      </Core:Property>
      <Core:Property property="bak:merry:react:enter-into%dangerarea">
         X[M] \$door = NRefDetail(\$target); 

/* The actor is targeting the gate. */ 
if(\$door != "exit-north") return TRUE;
/* Check for a travel delay. Don't let them proceed to new area until travel time has passed. */
if(\$actor."travel:delay") \{
    \$now = time(); 
    if(\$now \< \$actor."travel:delay") \{
        \$timeLeft = Flt(\$actor."travel:delay" - \$now)/3600.0;
        if(\$timeLeft \< 1.0) \{
            \$timeLeft = Flt(\$actor."travel:delay" - \$now)/60.0;
            if(\$timeLeft \< 1.0) \{
                \$str = "less than a minute";
            \} else \{
                \$str = Str(\$timeLeft)[0..2] + " minutes";
            \}
        \} else \{
            \$str = Str(\$timeLeft)[0..2] + " hours";
        \}
        EmitTo(\$actor, TAG("[OOC: It is too soon for you to travel to a new area. You must wait " + \$str + ".]", "imp"));
        return FALSE;
    \}
\}


/* if they have already consented, let them through */ 
if(\$actor."danger:consented") return TRUE; 
\$door = NRefDetail(\$target); 
/* The actor is targeting the punt. */ 
if(\$door == "exit-north") \{ 
EmitTo(\$actor, "You are entering a danger area. By entering, you automatically consent to possible death for "+Describe(\$actor)+".\\nIn addition, you will not be able to return to Triskellian until 24 real life hours have passed. This is meant to represent travel time."); 
interaction::question(\$question: "Are you sure you wish to continue?", \$env: "TRUE", \$expires: 60, \$yes_ob: \$this, \$yes_fun: "enter-danger", \$no: "You decide it would be best to stay here.", \$expire: "You decide it would be best to stay here.", \$par: ([ "actor": \$actor ])); 
return FALSE; 
\} else \{ 
return TRUE; \} 
return TRUE;
      </Core:Property>
      <Core:Property property="danger:exits">
         (\{ "exit-north" \})
      </Core:Property>
      <Core:Property property="export:sys:emit:area">
         \<Ironclaw:World:NewTown:North:Roads:NorthgateSquare:One\>
      </Core:Property>
      <Core:Property property="export:sys:emit:rand-default">
         2
      </Core:Property>
      <Core:Property property="export:sys:emit:sam-default">
         X[S] \{ \{ \<day\> \{ A constant cacophony of chatter and calling fills the area as cargo wagons laden with goods filter in and out of the toll gate, mixed with an equally large number of mounted riders and travelers on foot. \| A small group of travelers in dirty garb passes single-file through the toll gate, their faces hopeful and awed as they gape open-mouthed at the city of Triskellian before them. \| A group of Rinaldi soldiers marches in single file through the gates. \| Jostling and jarring in the tightly crammed line through the toll-gate, a group of young men begin wrestling before a Constable abruptly advances and cuffs the boys on the back of the head one after the other. \| A small young wolf lass nervously shifts her feet as the toll attendant looks over her paperwork. A moment passes before he declares her ticket and travel documents a forgery. She lets out a desperate cry as a Rinaldi guard drags her back out through the North Gate before returning to his post. \| A small group of children from every race huddle together in line, their garments tattered and torn. A priest waits patiently for the attendant to examine the collection of documents he holds and with a small blessing, he thanks the guards and herds the children into the city. \| A cargo wagon driver curses loudly at the toll attendant before turning his wagon around and roughly maneuvering it back through the North Gate, the crowds shouting in anger as he jostles them out of the way with another volley of curses. \| The area is filled with a chaotic bustle of people flowing in and out of the North Gate toll gate. \| The din of chatter and talking in every language drowns out any other discernible sound. \| The flow of traffic in and out of the city is a veritable assault on the senses as cargo wagons vie for space among the crowds of foreign travelers on foot. \} \</day\> \}  \}
      </Core:Property>
      <Core:Property property="merry:inherit:lib:tweak_pop">
         \<Lib:emitter\>
      </Core:Property>
      <Core:Property property="merry:inherit:react:enter-from%emitter">
         \<Lib:emitter\>
      </Core:Property>
      <Core:Property property="merry:inherit:react:enter-into%dangerarea">
         \<Ironclaw:Lib:Traveling\>
      </Core:Property>
      <Core:Property property="merry:inherit:react:enter-into%emitter">
         \<Lib:emitter\>
      </Core:Property>
      <Core:Property property="merry:inherit:react:teleport%emitter">
         \<Lib:emitter\>
      </Core:Property>
      <Core:Property property="revisions">
         (\{ 1507921582, "jominey", "E", 1507921643, "jominey", "E", 1507922090, "jominey", "E", 1507922358, "jominey", "E", 1507922600, "jominey", "E", 1507922926, "jominey", "E", 1507922945, "jominey", "E", 1507925407, "jominey", "E", 1507939137, "jominey", "E", 1507939174, "jominey", "E", 1508111675, "jominey", "E", 1509936526, "jominey", "S", 1509936533, "jominey", "S", 1509936568, "jominey", "S", 1509936602, "jominey", "E", 1509936613, "jominey", "E", 1509936636, "jominey", "E", 1509937613, "jominey", "E", 1509937629, "jominey", "E", 1509937897, "jominey", "S", 1509937904, "jominey", "S", 1509937919, "jominey", "S", 1572396793, "jominey", "S", 1572396793, "jominey", "S", 1572396793, "jominey", "S" \})
      </Core:Property>
      <Core:Property property="searching:randomobjects">
         1
      </Core:Property>
      <Core:Property property="skill:fatigue">1.0</Core:Property>
      <Core:Property property="sys:emit:channels">
         (\{ "default" \})
      </Core:Property>
      <Core:Property property="sys:emit:clist">
         (\{ "default" \})
      </Core:Property>
      <Core:Property property="sys:emit:enabled">
         (\{ "default" \})
      </Core:Property>
      <Core:Property property="sys:emit:population"/>
      <Core:Property property="sys:emit:rand-default">
         2
      </Core:Property>
      <Core:Property property="sys:emit:sam-default">
         X[S] \{ \{ \<day\> \{ A constant cacophony of chatter and calling fills the area as cargo wagons laden with goods filter in and out of the toll gate, mixed with an equally large number of mounted riders and travelers on foot. \| A small group of travelers in dirty garb passes single-file through the toll gate, their faces hopeful and awed as they gape open-mouthed at the city of Triskellian before them. \| A group of Rinaldi soldiers marches in single file through the gates. \| Jostling and jarring in the tightly crammed line through the toll-gate, a group of young men begin wrestling before a Constable abruptly advances and cuffs the boys on the back of the head one after the other. \| A small young wolf lass nervously shifts her feet as the toll attendant looks over her paperwork. A moment passes before he declares her ticket and travel documents a forgery. She lets out a desperate cry as a Rinaldi guard drags her back out through the North Gate before returning to his post. \| A small group of children from every race huddle together in line, their garments tattered and torn. A priest waits patiently for the attendant to examine the collection of documents he holds and with a small blessing, he thanks the guards and herds the children into the city. \| A cargo wagon driver curses loudly at the toll attendant before turning his wagon around and roughly maneuvering it back through the North Gate, the crowds shouting in anger as he jostles them out of the way with another volley of curses. \| The area is filled with a chaotic bustle of people flowing in and out of the North Gate toll gate. \| The din of chatter and talking in every language drowns out any other discernible sound. \| The flow of traffic in and out of the city is a veritable assault on the senses as cargo wagons vie for space among the crowds of foreign travelers on foot. \} \</day\> \}  \}
      </Core:Property>
      <Core:Property property="trait:smells:lastchecked">
         1566062481
      </Core:Property>
      <Core:Property property="trait:streetname">
         "Northgate"
      </Core:Property>
      <Core:Property property="trait:streettype">
         "square"
      </Core:Property>
    </Core:Properties>
    <Notes:Notes/>
  </Base:Thing>
</object>
